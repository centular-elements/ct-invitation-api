<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-ajax/iron-ajax.html">
<link rel="import" href="../ct-core-utils/ct-api-provider-behaviour.html">

<!--
`ct-invitation-api`
API for invitation management

@demo demo/index.html
-->

<dom-module id="ct-invitation-api">
  <template>

    <ct-user-identity id="identity"></ct-user-identity>

    <iron-ajax id="inviteUser"></iron-ajax>
    <iron-ajax id="acceptInvitation"></iron-ajax>
    <iron-ajax id="declineInvitation"></iron-ajax>

    <script>
        Polymer({

            is: 'ct-invitation-api',
            behaviors: [CT.Behaviours.ApiProvider],

            /**
             * Send an invitation
             *
             * @param {Object[]} params
             * @param {String} [params[].clientId]
             * @param {String} [params[].userId]
             * @param {String} params[].firstName
             * @param {String} params[].lastName
             * @param {String} [params[].group]
             *
             * @param {Object[]} params[].contacts
             * @param {String} params[].contacts[].contact
             * @param {String} params[].contacts[].contactType
             *
             * @returns {Promise}
             */

            inviteUser: function(params) {
                this.$.inviteUser.url = this._url('/invitation');
                this.$.inviteUser.metod = 'POST';
                this.$.inviteUser.contentType = "application/json";
                this.$.inviteUser.body = params;

                return this._generateRequest(this.$.inviteUser);
            },

            /**
             * Accept an invitation
             *
             * @param {String} inviteId
             *
             * @returns {Promise}
             */

            acceptInvitation: function(inviteId) {
                this.$.acceptInvitation.url = this._url('/invitation/' + id + '/accept');
                this.$.acceptInvitation.metod = 'PUT';
                this.$.acceptInvitation.contentType = "application/json";
                this.$.acceptInvitation.body = params;

                return this._generateRequest(this.$.acceptInvitation);
            },

            /**
             * Decline an invitation
             *
             * @param {String} inviteId
             *
             * @returns {Promise}
             */

            declineInvitation: function(inviteId) {
                this.$.acceptInvitation.url = this._url('/invitation/' + id + '/decline');
                this.$.acceptInvitation.metod = 'PUT';
                this.$.acceptInvitation.contentType = "application/json";
                this.$.acceptInvitation.body = params;

                return this._generateRequest(this.$.acceptInvitation);
            },



        });
    </script>
</dom-module>
